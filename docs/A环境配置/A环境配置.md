# é™„å½•A ç¯å¢ƒé…ç½®

## A.1 å®‰è£… Anaconda/Miniconda

### A.1.1 ä¸‹è½½ Miniconda

å„å¤§æ“ä½œç³»ç»Ÿæœ€æ–°ç‰ˆæœ¬çš„ Minconda éƒ½å¯ä»¥åœ¨ä¸‹æ–¹ç½‘å€è¿›è¡Œä¸‹è½½ï¼š

[Miniconda â€” Anaconda documentation](https://docs.anaconda.com/free/miniconda/index.html#latest-miniconda-installer-links)

æ³¨æ„ï¼šé€‰æ‹©ä¸‹è½½çš„ Miniconda3 ç‰ˆæœ¬éœ€è¦å’Œç”µè„‘å¤„ç†å™¨çš„æ¶æ„å»åˆã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨æ­¤ä¸‹æ–¹ç›´æ¥æä¾›å„å¤§æ“ä½œç³»ç»Ÿæ¨èçš„ä¸‹è½½é“¾æ¥ã€‚

| ç³»ç»Ÿ | ä¸‹è½½åœ°å€ |
| --- | --- |
| Windows | <https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe> |
| macOSï¼ˆIntelï¼‰ | <https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh> |
| macOSï¼ˆM1ï¼‰ | <https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-arm64.sh> |
| Linuxï¼ˆx64ï¼‰ | <https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh> |
| Linuxï¼ˆarm64ï¼‰ | <https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-aarch64.sh> |

### A.1.2 å®‰è£… Miniconda

ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»åœ¨ Windows ç³»ç»Ÿï¼ˆA.1.2.1 èŠ‚ï¼‰å’Œ Linux ç³»ç»Ÿï¼ˆA.1.2.2 èŠ‚ï¼‰ä¸‹çš„å®‰è£…æµç¨‹ã€‚

#### A.1.2.1 Windows ç³»ç»Ÿå®‰è£… Miniconda

1. è¿è¡Œä¸‹è½½å¥½çš„å®‰è£…åŒ…

![A_miniconda_setting](../../figures/Aç¯å¢ƒé…ç½®/A_miniconda_setting.png)

2. ä¸€è·¯nextå’Œagreeï¼Œç›´åˆ°é€‰æ‹©è·¯å¾„ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±åå¥½é€‰æ‹©è·¯å¾„ï¼Œè¿™é‡Œé€‰æ‹©é»˜è®¤ã€‚

![A_destination_folder](../../figures/Aç¯å¢ƒé…ç½®/A_destination_folder.png)

3. ä¿æŒé»˜è®¤é…ç½®å³å¯ï¼Œä¸‹ä¸€æ­¥ã€‚

![A_installation_options](../../figures/Aç¯å¢ƒé…ç½®/A_installation_options.png)

4. å®Œæˆï¼Œä»¥åä½¿ç”¨`conda` ä»å¼€å§‹èœå•ç‚¹å¼€å³å¯ã€‚

![A_conda_launcher](../../figures/Aç¯å¢ƒé…ç½®/A_conda_launcher.png)

![A_prompt](../../figures/Aç¯å¢ƒé…ç½®/A_prompt.png)

#### A.1.2.2 Linux ç³»ç»Ÿå®‰è£… Miniconda

ä¸‹è½½å¥½çš„å®‰è£…æ–‡ä»¶æ”¾åœ¨ Downloads æ–‡ä»¶ä¸­

![A_gnome_file_exploer](../../figures/Aç¯å¢ƒé…ç½®/A_gnome_file_exploer.png)

åœ¨`Miniconda3`æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯

1. ä¸ºæ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆæ–‡ä»¶åç§°è¦å’Œè‡ªå·±ä¸‹è½½çš„ç‰ˆæœ¬ä¸€è‡´ï¼‰å‘½ä»¤æ˜¯ï¼š`chmod a+x ./Miniconda3-latest-Linux-x86_64.sh`

![A_gnome_shell](../../figures/Aç¯å¢ƒé…ç½®/A_gnome_shell.png)

2.  è¿è¡Œå®‰è£…ç¨‹åºå‘½ä»¤ï¼Œå‘½ä»¤æ˜¯`sh ./Miniconda3-latest-Linux-x86_64.sh` ï¼Œç„¶åæ ¹æ®æç¤ºå›è½¦ã€‚

![A_license](../../figures/Aç¯å¢ƒé…ç½®/A_license.png)

3.  è¿™é‡Œä¼šè®©é˜…è¯»ç›¸å…³åè®®ï¼Œç›´æ¥æŒ‰`q` ç»“æŸé˜…è¯»ï¼Œè¾“å…¥`yes`ï¼Œç„¶åå›è½¦ã€‚

![A_more](../../figures/Aç¯å¢ƒé…ç½®/A_more.png)

![A_accept_license](../../figures/Aç¯å¢ƒé…ç½®/A_accept_license.png)

4.  åœ¨è¿™é‡Œç¨‹åºæç¤ºä»¥ä¸‹ä¿¡æ¯ï¼Œè¿™é‡Œæœ‰ä¸‰ç§é€‰æ‹©ï¼Œåˆ†åˆ«æ˜¯å›è½¦ä½¿ç”¨é»˜è®¤è·¯å¾„`\home\user\miniconda3` ã€ä½¿ç”¨`ctrl c` ç»ˆæ­¢ç¨‹åºã€ç”¨æˆ·è‡ªå®šä¹‰è·¯å¾„ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å®‰è£…ç›®å½•ã€‚

```bash
- Press ENTER to confirm the location
- Press CTRL-C to abort the installation
- Or specify a different location below
```

![A_conda_init](../../figures/Aç¯å¢ƒé…ç½®/A_conda_init.png)

5.  ç¨‹åºç»è¿‡å®‰è£…åä¼šè¯¢é—®æ˜¯å¦æ¯æ¬¡å¯åŠ¨ç»ˆç«¯æ˜¯å¦è‡ªåŠ¨å¯åŠ¨`conda`ã€‚è¾“å…¥`yes`ç„¶åå›è½¦ã€‚

![A_conda_inited](../../figures/Aç¯å¢ƒé…ç½®/A_conda_inited.png)

6. æ ¹æ®æç¤ºé‡å¯ç»ˆç«¯ï¼Œå†æ¬¡æ‰“å¼€å°±ä¼šå‡ºç°`(base)` ã€‚ä»¥åå°±åœ¨ç»ˆç«¯æ“ä½œ`conda`ã€‚

![A_base](../../figures/Aç¯å¢ƒé…ç½®/A_base.png)

## A.2 æ¢æº

åœ¨å®‰è£…packageæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨pip install package_nameå’Œconda install package_name çš„å‘½ä»¤ï¼Œä½†æ˜¯ä¸€äº›packageä¸‹è½½é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œæ¢æºï¼Œæ¢æˆå›½å†…æºï¼ŒåŠ å¿«æˆ‘ä»¬çš„ä¸‹è½½é€Ÿåº¦ã€‚ä»¥ä¸‹ä¾¿æ˜¯ä¸¤ç§å¯¹åº”æ–¹å¼çš„æ°¸ä¹…æ¢æºã€‚å¦‚æœæˆ‘ä»¬ä»…ä»…æƒ³ä¸ºå•æ¬¡ä¸‹è½½æ¢æºå¯ä»¥ä½¿ç”¨pip install package_name -i <https://pypi.tuna.tsinghua.edu.cn/simpleè¿›è¡Œä¸‹è½½ã€‚>

ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»åœ¨ Windows ç³»ç»Ÿï¼ˆA.2.1ï¼‰å’Œ Linux ç³»ç»Ÿï¼ˆA.2.2ï¼‰ä¸‹çš„æ¢æºã€‚

### A.2.1 Windows ç³»ç»Ÿæ¢æº

#### A.2.1.1 `pip`æ¢æº

1. æ–‡ä»¶ç®¡ç†å™¨æ–‡ä»¶è·¯å¾„åœ°å€æ æ•²ï¼š`%APPDATA%`Â å›è½¦ï¼Œå¿«é€Ÿè¿›å…¥Â `C:\Users\User\AppData\Roaming`Â æ–‡ä»¶å¤¹ã€‚

![A_APPDATA](../../figures/Aç¯å¢ƒé…ç½®/A_APPDATA.png)

2.  æ–°å»º pip æ–‡ä»¶å¤¹å¹¶åœ¨æ–‡ä»¶å¤¹ä¸­æ–°å»ºÂ `pip.ini`Â é…ç½®æ–‡ä»¶ã€‚

![A_new_pipini](../../figures/Aç¯å¢ƒé…ç½®/A_new_pipini.png)

3. ä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œå¹¶æŒ‰ä¸‹`ctrl+s`ä¿å­˜ã€‚

```
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
[install]
use-mirrors =true
mirrors = https://pypi.tuna.tsinghua.edu.cn/simple/
trusted-host = pypi.tuna.tsinghua.edu.cn
```

![A_win_pipini](../../figures/Aç¯å¢ƒé…ç½®/A_win_pipini.png)

#### A.2.1.2 `conda`æ¢æº

æˆ‘ä»¬éœ€è¦åœ¨`.condarc`æ–‡ä»¶å†…è¿›è¡Œæ¢æºï¼Œä½†æ˜¯Windows ç”¨æˆ·æ— æ³•ç›´æ¥åˆ›å»ºåä¸ºÂ `.condarc`Â çš„æ–‡ä»¶ï¼Œå¯å…ˆæ‰§è¡Œ`condaÂ configÂ --setÂ show_channel_urlsÂ yes`ç”Ÿæˆè¯¥æ–‡ä»¶ä¹‹åå†ä¿®æ”¹ã€‚

1. æ‰§è¡Œå®Œ`condaÂ configÂ --setÂ show_channel_urlsÂ yes`åä¼šåœ¨ç”¨æˆ·æ–‡ä»¶å¤¹æ‰¾åˆ°`.condarc` æ–‡ä»¶ã€‚

![A_condarc](../../figures/Aç¯å¢ƒé…ç½®/A_condarc.png)

2. ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œæ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ã€‚

```
channels:
  - defaults
show_channel_urls: true
default_channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
custom_channels:
  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
```

### A.2.2 Linux ç³»ç»Ÿæ¢æº

<aside>
ğŸ’¡ å‰æƒ…æç¤ºï¼šåœ¨`vim`ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥`i`è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå°†å†…å®¹ç²˜è´´è¿›å»ï¼ŒæŒ‰`ESC`é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥`:wq`ä¿å­˜å¹¶é€€å‡ºã€‚

</aside>

#### A.2.2.1 `pip`æ¢æº

    åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤
    
    ```bash
    cd ~
    mkdir .pip/
    cd .pip
    vim pip.conf
    ```
    
    åœ¨è¿™ä¸ª`pip.conf`æ–‡ä»¶ä¸‹åº”è¯¥ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´åˆ°æ–‡ä»¶å†…å³å¯ï¼Œç„¶åç»“æŸç¼–è¾‘ã€‚
    
    ```bash
    [global]
    index-url = https://pypi.tuna.tsinghua.edu.cn/simple
    [install]
    use-mirrors =true
    mirrors = https://pypi.tuna.tsinghua.edu.cn/simple/
    trusted-host = pypi.tuna.tsinghua.edu.cn
    ```

#### A.2.2.2 `conda`æ¢æº

    åœ¨ç»ˆç«¯æ‰§â¾ä»¥ä¸‹å‘½ä»¤
    
    ```bash
    cd ~
    vim .condarc
    ```
    
    åœ¨`.condarc` æ–‡ä»¶å†…åº”è¯¥ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´åˆ°æ–‡ä»¶å†…å³å¯ã€‚ç„¶åç»“æŸç¼–è¾‘
    
    ```
    channels:
      - defaults
    show_channel_urls: true
    default_channels:
      - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
      - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
      - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
    custom_channels:
      conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
      msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
      bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
      menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
      pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
      simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
    ```
    
    æœ€åä½¿ç”¨`condaÂ cleanÂ -i`Â æ¸…é™¤ç´¢å¼•ç¼“å­˜ã€‚

## A.3 `conda`/`pip`çš„ä½¿ç”¨

- æŸ¥çœ‹ç°æœ‰è™šæ‹Ÿç¯å¢ƒï¼š`conda env list`
- åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š`conda create -n env_name python**=**version`
  - `create`ï¼š åˆ›å»ºç¯å¢ƒå‘½ä»¤
  - `-n`ï¼š`--name` ç¼©å†™ï¼Œåé¢ç´§æ¥ç€æ˜¯è™šæ‹Ÿç¯å¢ƒåç§°
  - `env_name`ï¼šè™šæ‹Ÿç¯å¢ƒåç§°ï¼šè§åçŸ¥æ„ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ›´æ”¹
  - `version` ï¼šPythonç‰ˆæœ¬ï¼Œä¾‹å¦‚3.8ï¼Œä»¥ä¸‹æ˜¯å…·ä½“ç¤ºä¾‹

![A_conda_create_env](../../figures/Aç¯å¢ƒé…ç½®/A_conda_create_env.png)

- æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`conda activate env_name` ï¼Œæ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œç»ˆç«¯å°†ä¼šåœ¨æ‹¬å·å†…æ˜¾ç¤ºå½“å‰ç¯å¢ƒåç§°ã€‚

![A_conda_activate_env](../../figures/Aç¯å¢ƒé…ç½®/A_conda_activate_env.png)

- å®‰è£…åŒ…ï¼š`conda install package_name`æˆ–è€…`pip install package_name`
- `pip`åœ¨å®‰è£…åŒ…æ—¶ä¸´æ—¶æ›´æ¢é•œåƒæºï¼š`pip install package_name -i https://pypi.tuna.tsinghua.edu.cn/simple`
- å¸è½½åŒ…ï¼š`conda remove package_name`æˆ–è€…`pip uninstall package_name`
- æ˜¾ç¤ºæ‰€æœ‰å®‰è£…çš„åŒ…ï¼š`conda list`
- åˆ é™¤æŒ‡å®šè™šæ‹Ÿç¯å¢ƒï¼š`conda remove -n env_name --all`
- é€€å‡ºå½“å‰ç¯å¢ƒï¼š`conda deactivate`

æ›´å¤šçš„`conda`å‘½ä»¤å‚è€ƒå®˜ç½‘ã€‚

[Commands â€” conda 24.3.1.dev30 documentation](https://docs.conda.io/projects/conda/en/latest/commands/index.html)

## A.4 å®‰è£… PyTorchã€DGL å’Œ PyG

<aside>
ğŸ’¡ å½“ä½ æƒ³åœ¨è™šæ‹Ÿç¯å¢ƒå®‰è£…åŒ…çš„æ—¶å€™ï¼Œç¡®è®¤ä½ æ­£å¤„åœ¨æ­£ç¡®çš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼ï¼

</aside>

<aside>
âš ï¸ ä»¥ä¸‹çš„å‡½æ•°åº“å¤§éƒ¨åˆ†éœ€è¦ç»“åˆä½ çš„è®¾å¤‡ç¡¬ä»¶åŠå…¶é©±åŠ¨é€‰æ‹©æ­£ç¡®çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ä½ å¯èƒ½éœ€è¦çš„æ˜¯é€‚é…ç‰¹å®šç‰ˆæœ¬çš„ cuda çš„ torchã€‚

æˆ‘ä»¬ä¸‹é¢ä»¥ RTX 3080 Laptopï¼Œæœ€é«˜æ”¯æŒ cuda ç‰ˆæœ¬ 11.7ï¼Œåœ¨ Linux ç³»ç»Ÿï¼ˆWindows çš„ WSLï¼‰ä¸‹ï¼Œä¸ºä¾‹å®‰è£… PyTorch 2.0.0 åŠå…¶ç›¸å…³çš„ DGL å’Œ PyGã€‚

</aside>

1. åˆ›å»ºç¯å¢ƒ

```bash
conda create --name grape-book python=3.9
```

è¿›å…¥ç¯å¢ƒ

```bash
conda activate grape-book
```

2. å®‰è£… `PyTorch`

åŒæ—¶é€‰æ‹©å®‰è£… cuda 11.7ã€‚

```bash
conda install pytorch==2.0.0 torchvision==0.15.0 torchaudio==2.0.0 pytorch-cuda=11.7 -c pytorch -c nvidia
```

å¦‚æœä½ çš„ cuda ç‰ˆæœ¬ä¸åŒï¼Œè¯·è®¿é—® [PyTorch å®˜ç½‘](https://pytorch.org/)ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼Œæˆ–ä½¿ç”¨ CPU ç‰ˆæœ¬ã€‚

3. å®‰è£… `networkx`

```bash
pip install networkx[default]
```

4. å®‰è£… `dgl`

å› ä¸ºæˆ‘ä»¬å‰é¢é€‰æ‹©å®‰è£…äº† cuda 11.7ï¼Œè¿™é‡Œæˆ‘ä»¬å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ dglã€‚

```bash
# If you have installed dgl-cuXX package, please uninstall it first.
pip install  dgl -f https://data.dgl.ai/wheels/cu117/repo.html
pip install  dglgo -f https://data.dgl.ai/wheels-test/repo.html
```

Deep Graph Library (DGL) çš„å®‰è£…ä¼šä¾èµ–äº PyTorch å’Œ cuda çš„ç‰ˆæœ¬ã€‚å¦‚æœå¤§å®¶åœ¨è¿™ä¸€æ­¥ä¸æˆåŠŸï¼Œå¯ä»¥æŸ¥çœ‹ [DGL å®˜ç½‘](https://www.dgl.ai/pages/start.html)ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±è®¾å¤‡çš„ç»„åˆã€‚

å¦‚æœå®˜ç½‘ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥åˆ©ç”¨æ¸…åæºè¿›è¡ŒåŠ é€Ÿä¸‹è½½ï¼Œ`pip install dgl dglgo -i https://pypi.tuna.tsinghua.edu.cn/simple` ï¼ˆè¿™é‡Œåº”è¯¥é»˜è®¤æ˜¯é cuda ç‰ˆæœ¬ï¼‰ã€‚

5. å®‰è£… `PyG`

```bash
pip install torch_geometric
```

åŒæ ·ï¼ŒPyG çš„å®‰è£…ä¹Ÿä¼šä¾èµ–äº PyTorch å’Œ cuda çš„ç‰ˆæœ¬ã€‚å¦‚æœå¤§å®¶åœ¨è¿™ä¸€æ­¥ä¸æˆåŠŸï¼Œè¯·æŸ¥çœ‹ [PyG å®˜ç½‘](https://pyg.org/)ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±è®¾å¤‡çš„ç»„åˆã€‚

âš ï¸ ä¸å»ºè®®ä½¿ç”¨ conda å®‰è£… DGL å’Œ PyGã€‚

## å‚è€ƒ

[1] [Miniconda â€” Anaconda documentation](https://docs.anaconda.com/free/miniconda/index.html#latest-miniconda-installer-links)

[2] [PyTorch Document](https://pytorch.org/)

[3] [DGL Document](https://www.dgl.ai/pages/start.html)

[4] [PyG Document](https://pyg.org/)

[5] [æ·±å…¥æµ…å‡º PyTorch](https://datawhalechina.github.io/thorough-pytorch/)
